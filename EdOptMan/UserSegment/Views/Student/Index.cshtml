@model IEnumerable<UserSegment.Models.StudentEntryModel>

@{
    ViewData["Title"] = "Student List";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var res = ViewBag.Success;
}

@if (res?.Result == true)
{
    <div style="background-color: #d4edda; color: #155724; padding: 12px; border-radius: 6px; margin-bottom: 15px;">
        Student information saved/updated successfully!
    </div>
}
@if (res?.Result == false)
{
    <div style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 15px;">
        Failed to save student information. Please try again.
    </div>
}

<div class="container">

    <!-- PAGE HEADER -->
    <div class="page-header">
        <h1 class="page-title">
            <span>🎓</span>
            Student List
        </h1>
        <a href="@Url.Action("Index", "Home")" class="btn-back">← Back to Home</a>
    </div>

    <!-- ADD NEW STUDENT -->
    <div class="page-header">
        <h2>🧑‍💼 Add New Student</h2>
        <a href="@Url.Action("StudentInfo", "Student")" class="btn-primary">➕ Register Student</a>
    </div>

    <!-- TABLE WRAPPER -->
    <div class="table-wrapper">
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Profile</th>
                    <th>Name</th>
                    <th>Student ID</th>
                    <th>Class</th>
                    <th>Phone</th>
                    <th>City</th>
                    <th style="width:160px;">Actions</th>
                </tr>
            </thead>

            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (var std in Model)
                    {
                        <tr>
                            <td>
                                @if (!string.IsNullOrEmpty(std.ProfilePhotoPath))
                                {
                                    <img src="@std.ProfilePhotoPath" alt="Profile Photo"
                                         style="width:40px; height:40px; border-radius:50%;" />
                                }
                                else
                                {
                                    <span>—</span>
                                }
                            </td>

                            <td>@std.FirstName @std.LastName</td>
                            <td>@std.StudentId</td>
                            <td>@std.ClassId</td>
                            <td>@std.PhoneNumber</td>
                            <td>@std.City</td>

                            <td class="actions">
                                <a href="@Url.Action("EditStudent", "Student", new { id = std.Id })" class="btn-edit">✏️ Edit</a>
                                <a href="@Url.Action("StudentDetail", "Student", new { id = std.Id })" class="btn-view">👁️ View</a>
                                <a href="@Url.Action("DeleteConfirmed", "Student", new { id = std.Id })" class="btn-delete">🗑️ Delete</a>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="7" style="text-align:center; padding:20px;">
                            No students found.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

</div>
