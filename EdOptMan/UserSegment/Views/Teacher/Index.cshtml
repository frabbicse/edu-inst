@model IEnumerable<UserSegment.Models.TeacherEntryModel>

@{
    ViewData["Title"] = "Teacher List";
    Layout = "~/Views/Shared/_Layout.cshtml";

    var res = ViewBag.Success;
}

@if (res?.Result == true)
{
    <div style="background-color: #d4edda; color: #155724; padding: 12px; border-radius: 6px; margin-bottom: 15px;">
        Teacher information saved/updated successfully!
    </div>
}
@if (res?.Result == false)
{
    <div style="background-color: #f8d7da; color: #721c24; padding: 12px; border-radius: 6px; margin-bottom: 15px;">
        Failed to save teacher information. Please try again.
    </div>
}

<div class="container">

    <!-- PAGE HEADER -->
    <div class="page-header">
        <h1 class="page-title">
            <span>👨‍🏫</span>
            Teacher List
        </h1>
        <a href="@Url.Action("Index", "Home")" class="btn-back">← Back to Home</a>
    </div>

    <!-- ADD NEW TEACHER -->
    <div class="page-header">
        <h2>🧑‍🏫 Add New Teacher</h2>
        <a href="@Url.Action("TeacherInfo", "Teacher")" class="btn-primary">➕ Register Teacher</a>
    </div>

    <!-- TABLE WRAPPER -->
    <div class="table-wrapper">
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Profile</th>
                    <th>Name</th>
                    <th>Teacher ID</th>
                    <th>Department</th>
                    <th>Phone</th>
                    <th>City</th>
                    <th style="width:160px;">Actions</th>
                </tr>
            </thead>

            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (var t in Model)
                    {
                        <tr>
                            <td>
                                @if (!string.IsNullOrEmpty(t.ProfilePhotoPath))
                                {
                                    <img src="@t.ProfilePhotoPath" alt="Profile Photo"
                                         style="width:40px; height:40px; border-radius:50%;" />
                                }
                                else
                                {
                                    <span>—</span>
                                }
                            </td>

                            <td>@t.FirstName @t.LastName</td>
                            <td>@t.TeacherId</td>

                            <td>@t.DepartmentId</td> @* Replace with DepartmentName if available *@

                            <td>@t.PhoneNumber</td>
                            <td>@t.City</td>

                            <td class="actions">
                                <a href="@Url.Action("EditTeacher", "Teacher", new { id = t.Id })" class="btn-edit">✏️ Edit</a>
                                <a href="@Url.Action("TeacherDetail", "Teacher", new { id = t.Id })" class="btn-view">👁️ View</a>
                                <a href="@Url.Action("DeleteConfirmed", "Teacher", new { id = t.Id })" class="btn-delete">🗑️ Delete</a>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="7" style="text-align:center; padding:20px;">
                            No teachers found.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

</div>
